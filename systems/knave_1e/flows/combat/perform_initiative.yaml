id: perform_initiative
type: flow
name: "Perform Initiative"
description: >-
  Determines the who acts first in combat - Players or Enemies.
version: "1.0"
inputs: []

outputs:
  - type: str
    id: side_with_initiative
    enum: ["Players", "Enemies"]
    description: "The side with the initiative"

steps:
  - id: roll_initiative
    name: "Roll Initiative"
    type: dice_roll
    prompt: "Rolling for initiative..."
    roll: 1d6
    actions:
      - set_value:
          path: "outputs.side_with_initiative"
          value: "{% if result.total > 3 %}Players{% else %}Enemies{% endif %}"
      - log_message:
          message: "Rolled {{ result.detail }}"
    result_message: "{{ outputs.side_with_initiative }} have initiative"
